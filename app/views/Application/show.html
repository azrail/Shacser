#{extends 'main.html' /}
#{set title:post.title /}
#{if post.description != null}
	#{set description:post.description /}
#{/if}
#{else}
	#{set description:description /}
#{/else}
#{if post.keywords != null}
	#{set keywords:post.keywords /}
#{/if}
#{else}
	#{set keywords:keywords /}
#{/else}
#{if flash.success}
<p class="success">
	${flash.success}
</p>
#{/if}

#{display post:post, as:'full' /}

<h3>Schreibe einen Kommentar</h3>
<div class="form">
	<form action="@{Application.postComment(post.id)}" method="post" id="contactform">
		#{ifErrors}
		<p class="error">
			${errors[0]}
		</p>
		#{/ifErrors}
		<ol>
			<li>
				<label for="author">
					Dein Name
					<span class="red">*</span>
				</label>
				<input type="text" class="text" name="author" id="author" value="${params.author}" />
			</li>
			<li>
				<label for="email">
					Deine E-Mail
				</label>
				<input type="text" class="text" name="email" id="email" value="${params.email}" />
			</li>
			<li>
				<label for="url">
					Deine Webseite
				</label>
				<input type="text" class="text" name="url" id="url" value="${params.url}" />
			</li>
			<li>
				<label for="content">
					Deine Nachricht
					<span class="red">*</span>
				</label>
				<textarea name="content" rows="6" cols="50" id="content">
					${params.content}
				</textarea>
				<span class="left">Html ist erlaubt (b, em, i, strong, u)</span>
				<input type="hidden" name="randomID" value="${randomID}" />
			</li>
			<li class="buttons">
				<input type="image" name="imageField" alt="Formular Absenden" title="Kommentar Senden" id="imageField" src="@{'/public/images/send.gif'}" class="send">
				<div class="clr">
				</div>
			</li>
		</ol>
	</form>
</div>
<script>
	$( function() {
		// Expose the form
		$('form').click( function() {
			$('form').expose({api: true}).load();
			$('kommentar').expose({api: true}).load();
		});
		// If there is an error, focus to form
		if($('form .error').size()) {
			$('form').expose({api: true, loadSpeed: 0}).load();
			$('form input[type=text]').get(0).focus();
		}
	});
</script>